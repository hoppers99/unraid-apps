<?xml version="1.0"?>
<Container version="2">
    <Name>alexandria-backend</Name>
    <Repository>ghcr.io/hoppers99/alexandria-backend:latest</Repository>
    <Registry>https://github.com/hoppers99/alexandria/pkgs/container/alexandria-backend</Registry>
    <Branch>
        <Tag>latest</Tag>
        <TagDescription>Latest stable release</TagDescription>
    </Branch>
    <Network>bridge</Network>
    <Privileged>false</Privileged>
    <Support>https://github.com/hoppers99/alexandria/issues</Support>
    <Project>https://github.com/hoppers99/alexandria</Project>
    <Overview>Alexandria Backend - FastAPI application providing the API and file processing for the Alexandria digital library system.&#xD;
&#xD;
This handles metadata enrichment, file organisation, and serves the REST API.&#xD;
&#xD;
Install alexandria-db first, then this backend, then alexandria (frontend).</Overview>
    <Category>MediaApp:Books MediaServer:Books Productivity:</Category>
    <Icon>https://raw.githubusercontent.com/hoppers99/alexandria/main/docs/logo.png</Icon>
    <ExtraParams>--restart unless-stopped</ExtraParams>
    <Requires>Requires the alexandria-db PostgreSQL container to be running first.</Requires>
    <Config Name="API Port" Target="8000" Default="8000" Mode="tcp" Description="Port for the backend API" Type="Port" Display="always" Required="true"/>
    <Config Name="Library Path" Target="/library" Default="/mnt/user/media/books/" Mode="rw" Description="Path to your book library. This folder should contain (or will be created with) Fiction/, Non-Fiction/, and .returns/ subdirectories." Type="Path" Display="always" Required="true"/>
    <Config Name="Database Host" Target="ALEXANDRIA_DB_HOST" Default="alexandria-db" Mode="" Description="Hostname of the PostgreSQL container" Type="Variable" Display="advanced" Required="true"/>
    <Config Name="Database Port" Target="ALEXANDRIA_DB_PORT" Default="5432" Mode="" Description="PostgreSQL port" Type="Variable" Display="advanced" Required="true"/>
    <Config Name="Database Password" Target="ALEXANDRIA_DB_PASSWORD" Default="alexandria" Mode="" Description="PostgreSQL password (must match alexandria-db)" Type="Variable" Display="always" Required="true" Mask="true"/>
    <Config Name="Library Root" Target="ALEXANDRIA_LIBRARY_ROOT" Default="/library" Mode="" Description="Library root path inside the container (should match the volume mount)" Type="Variable" Display="advanced-hide" Required="true"/>
    <Config Name="Confidence Threshold" Target="ALEXANDRIA_CONFIDENCE_THRESHOLD" Default="0.8" Mode="" Description="Minimum confidence (0.0-1.0) for automatic classification. Lower values are more permissive." Type="Variable" Display="advanced" Required="false"/>
</Container>
